Here's your **updated and complete project specification prompt** for HackRx 6.0 â€” now rewritten to use **Gemini Flash 1.5** via **Google Generative AI** instead of OpenAI GPT-4.

---

# âœ… HackRx 6.0 â€“ Gemini Flash 1.5 Based Project Specification

## ğŸš¨ CRITICAL INSTRUCTIONS FOR DEVELOPER

* âœ… Must be built in **Python**
* âœ… Must use **FastAPI**
* âœ… Must support **Postman testing**
* âœ… Must be **hosted publicly over HTTPS**
* âœ… Must use **Gemini Flash 1.5** (Google Generative AI API)
* âŒ Do **not** use JavaScript or Node.js

---

## ğŸ§  Objective

Build a **Python-based Intelligent Document Question-Answering API** using **Gemini Flash 1.5**.

The API will:

* Accept a **public URL to a PDF**
* Accept a list of **natural language questions**
* Extract accurate answers from the PDF using semantic search + Gemini Flash 1.5
* Return answers in strict format

---

## ğŸ”— API Details

### â–¶ï¸ Endpoint

```http
POST /hackrx/run
```

### ğŸŒ Hosting

* Must be **publicly accessible** via HTTPS
* Example: `https://your-app-name.replit.app/hackrx/run`

---

### ğŸ” Authentication

Use **Bearer Token** in headers:

```http
Authorization: Bearer <your_secret_api_key>
Content-Type: application/json
```

---

## ğŸ“¥ Request Body (Input Format)

JSON:

```json
{
  "documents": "<URL-to-PDF>",
  "questions": [
    "Question 1?",
    "Question 2?",
    "... up to 10 questions"
  ]
}
```

---

## ğŸ“¤ Response Body (Output Format)

JSON:

```json
{
  "answers": [
    "Answer to question 1",
    "Answer to question 2",
    "... up to 10 answers"
  ]
}
```

âœ… Answer **order must match** the question order
âœ… All answers must come from **document context only**
âŒ Do not hallucinate or guess

---

## ğŸ—ï¸ Required Functional Components

### 1. ğŸ”¹ PDF Downloader

* Accepts public URL to PDF
* Downloads and extracts text
* Use `PyMuPDF (fitz)` or `pdfplumber`

### 2. ğŸ”¹ Chunking + Embedding Generator

* Split text into overlapping chunks (e.g. 300â€“500 tokens)
* Generate **embeddings** (using `google.generativeai` or any SentenceTransformer model)
* Store chunks in **FAISS**

### 3. ğŸ”¹ Semantic Search

* For each question:

  * Generate embedding
  * Search vector DB for relevant chunks (top 5)

### 4. ğŸ”¹ Answer Generator (Gemini Flash 1.5)

* Use Gemini Flash 1.5 with the prompt:

  ```text
  Answer the question using only the provided context.
  If the answer is not in the context, reply "Not found in document".

  Context:
  {chunked_text}

  Question:
  {user_question}
  ```

* Use `google.generativeai` Python SDK

### 5. ğŸ”¹ Response Formatter

* Match output format as described above
* Return only text answers (no citations or explanation)

---

## ğŸ› ï¸ Recommended Tech Stack

| Component    | Tool                          |
| ------------ | ----------------------------- |
| Language     | **Python 3.11+**              |
| Framework    | **FastAPI**                   |
| PDF Parsing  | `PyMuPDF` or `pdfplumber`     |
| Embeddings   | Gemini or SentenceTransformer |
| LLM Model    | **Gemini Flash 1.5**          |
| Vector Store | **FAISS**                     |
| Auth         | Bearer Token                  |
| Hosting      | **Render** or **Replit**      |

---

## ğŸ“¦ `.env` Example

Create a `.env` file:

```env
GOOGLE_API_KEY=your-gemini-api-key
```

Load it in your code:

```python
from dotenv import load_dotenv
load_dotenv()
```

---

## ğŸ§ª Postman Testing Instructions

1. Open [Postman](https://postman.com)

2. Create a **POST** request:

   ```
   https://your-deployment-url/hackrx/run
   ```

3. Headers:

   | Key           | Value                 |
   | ------------- | --------------------- |
   | Authorization | Bearer YOUR\_API\_KEY |
   | Content-Type  | application/json      |

4. Body (JSON):

```json
{
  "documents": "https://hackrx.blob.core.windows.net/assets/sample-policy.pdf",
  "questions": [
    "Does this policy cover organ donation expenses?",
    "What is the waiting period for knee replacement surgery?"
  ]
}
```

---

## âœ… Deployment Checklist

| Requirement                                 | Status   |
| ------------------------------------------- | -------- |
| âœ… Python + FastAPI only                     | Required |
| âœ… Accepts public PDF + list of questions    | Required |
| âœ… Parses + chunks PDF                       | Required |
| âœ… Embeds using Gemini / SentenceTransformer | Required |
| âœ… Uses FAISS for retrieval                  | Required |
| âœ… Uses Gemini Flash 1.5 for QA              | Required |
| âœ… No hallucinated answers                   | Required |
| âœ… Secured with Bearer token                 | Required |
| âœ… Public HTTPS hosting (Render/Replit)      | Required |
| âœ… Works via Postman                         | Required |
| âœ… Responds in 30 seconds                    | Required |
| âœ… Output format is strict JSON answer array | Required |

---

## ğŸ¯ What to Give Replit/Render Developer

Tell them to:

* Follow this spec exactly
* Use `google.generativeai` with Gemini Flash 1.5
* Use `.env` for secret keys
* Provide:

  * Public endpoint URL
  * Sample Postman test
  * Working `/hackrx/run` endpoint

---

Would you like me to now generate a **working FastAPI starter template** using Gemini Flash 1.5 that can be pasted directly into Replit or Render?

Let me know â€” Iâ€™ll send it right away.
